<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login / Register - AURA STORE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>tailwind.config = { theme: { extend: { fontFamily: { sans: ['Inter', 'sans-serif'], } } } }</script>
    <style>
        body { background-color: #f8fafc; -webkit-font-smoothing: antialiased; } 
        .toggle-active { background-color: #ffffff; color: #2563eb; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .toggle-inactive { color: #64748b; } .toggle-inactive:hover { color: #334155; }
        .input-focus { transition: all 0.2s ease; } .input-focus:focus { box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1); border-color: #3b82f6; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
    </style>
</head>
<body class="h-screen flex justify-center items-center px-4 text-slate-800">
    <div class="bg-white p-8 sm:p-10 rounded-[20px] shadow-[0_10px_40px_rgb(0,0,0,0.04)] w-full max-w-md border border-slate-100">
        <div class="flex bg-slate-100/80 p-1.5 rounded-xl mb-8">
            <button id="btn-login" onclick="switchTab('login')" class="flex-1 py-2.5 text-sm font-semibold rounded-lg transition-all duration-300 toggle-active tracking-wide">Login</button>
            <button id="btn-register" onclick="switchTab('register')" class="flex-1 py-2.5 text-sm font-semibold rounded-lg transition-all duration-300 toggle-inactive tracking-wide">Register</button>
        </div>
        <form id="loginForm" class="space-y-5 block animate-fade-in">
            <div><label class="block text-sm font-semibold text-slate-700 mb-2">Email</label><input type="email" id="logEmail" placeholder="Enter your email" required class="input-focus w-full px-4 py-3.5 border border-slate-200 rounded-xl outline-none text-slate-800 placeholder-slate-400 bg-white text-sm"></div>
            <div><label class="block text-sm font-semibold text-slate-700 mb-2">Password</label><input type="password" id="logPass" placeholder="Enter your password" required class="input-focus w-full px-4 py-3.5 border border-slate-200 rounded-xl outline-none text-slate-800 placeholder-slate-400 bg-white text-sm"></div>
            <button type="submit" class="w-full bg-[#2563eb] hover:bg-blue-700 text-white font-semibold py-3.5 rounded-xl transition-all shadow-md hover:shadow-lg active:scale-[0.98] mt-2 tracking-wide text-[15px]">Login</button>
            <div class="text-center mt-6"><a href="/" class="text-sm text-slate-400 hover:text-blue-600 transition-colors font-medium">Back to Home</a></div>
        </form>
        <form id="registerForm" class="space-y-4 hidden animate-fade-in">
            <div><label class="block text-sm font-semibold text-slate-700 mb-2">Full Name</label><input type="text" id="regName" placeholder="Enter your full name" required class="input-focus w-full px-4 py-3.5 border border-slate-200 rounded-xl outline-none text-slate-800 placeholder-slate-400 bg-white text-sm"></div>
            <div><label class="block text-sm font-semibold text-slate-700 mb-2">Email</label><input type="email" id="regEmail" placeholder="Enter your email" required class="input-focus w-full px-4 py-3.5 border border-slate-200 rounded-xl outline-none text-slate-800 placeholder-slate-400 bg-white text-sm"></div>
            <div><label class="block text-sm font-semibold text-slate-700 mb-2">Password</label><input type="password" id="regPass" placeholder="Create a password" required class="input-focus w-full px-4 py-3.5 border border-slate-200 rounded-xl outline-none text-slate-800 placeholder-slate-400 bg-white text-sm"></div>
            <div><label class="block text-sm font-semibold text-slate-700 mb-2">Select Country</label><select id="regCountry" class="input-focus w-full px-4 py-3.5 border border-slate-200 rounded-xl outline-none text-slate-800 bg-white text-sm cursor-pointer appearance-none"><option value="BD">ðŸ‡§ðŸ‡© Bangladesh (BDT)</option><option value="IN">ðŸ‡®ðŸ‡³ India (INR)</option><option value="PK">ðŸ‡µðŸ‡° Pakistan (PKR)</option><option value="US">ðŸ‡ºðŸ‡¸ Global (USD)</option></select></div>
            <button type="submit" class="w-full bg-[#2563eb] hover:bg-blue-700 text-white font-semibold py-3.5 rounded-xl transition-all shadow-md hover:shadow-lg active:scale-[0.98] mt-4 tracking-wide text-[15px]">Create Account</button>
            <div class="text-center mt-4"><a href="/" class="text-sm text-slate-400 hover:text-blue-600 transition-colors font-medium">Back to Home</a></div>
        </form>
    </div>
    <script>
        function switchTab(tab) {
            const loginForm = document.getElementById('loginForm'); const regForm = document.getElementById('registerForm'); const btnLogin = document.getElementById('btn-login'); const btnReg = document.getElementById('btn-register');
            if(tab === 'login') { loginForm.classList.remove('hidden'); regForm.classList.add('hidden'); btnLogin.className = "flex-1 py-2.5 text-sm font-semibold rounded-lg transition-all duration-300 toggle-active tracking-wide"; btnReg.className = "flex-1 py-2.5 text-sm font-semibold rounded-lg transition-all duration-300 toggle-inactive tracking-wide"; } 
            else { regForm.classList.remove('hidden'); loginForm.classList.add('hidden'); btnReg.className = "flex-1 py-2.5 text-sm font-semibold rounded-lg transition-all duration-300 toggle-active tracking-wide"; btnLogin.className = "flex-1 py-2.5 text-sm font-semibold rounded-lg transition-all duration-300 toggle-inactive tracking-wide"; }
        }
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault(); const btn = e.target.querySelector('button[type="submit"]'); const originalText = btn.innerText; btn.innerText = "Processing..."; btn.disabled = true;
            const name = document.getElementById('regName').value; const email = document.getElementById('regEmail').value; const password = document.getElementById('regPass').value; const country = document.getElementById('regCountry').value;
            try { const res = await fetch('/api/register', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ name, email, password, country }) }); const data = await res.json();
                if(data.success) { Swal.fire({title: 'Welcome!', text: 'Account created successfully. Please login.', icon: 'success', confirmButtonColor: '#2563eb', customClass: {popup: 'rounded-2xl'}}); switchTab('login'); document.getElementById('registerForm').reset(); } 
                else { Swal.fire({title: 'Oops!', text: data.error, icon: 'error', confirmButtonColor: '#2563eb', customClass: {popup: 'rounded-2xl'}}); }
            } catch(err) {} btn.innerText = originalText; btn.disabled = false;
        });
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault(); const btn = e.target.querySelector('button[type="submit"]'); const originalText = btn.innerText; btn.innerText = "Authenticating..."; btn.disabled = true;
            const email = document.getElementById('logEmail').value; const password = document.getElementById('logPass').value;
            try { const res = await fetch('/api/login', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ email, password }) }); const data = await res.json();
                if(data.success) { localStorage.setItem('user', JSON.stringify(data.user)); window.location.href = '/'; } 
                else { Swal.fire({title: 'Access Denied', text: data.error, icon: 'error', confirmButtonColor: '#2563eb', customClass: {popup: 'rounded-2xl'}}); }
            } catch(err) {} btn.innerText = originalText; btn.disabled = false;
        });
    </script>
</body>
</html>
